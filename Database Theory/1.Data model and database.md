# 一、绪论

## 1、数据库

数据库 (Database, 简称 DB) 是长期储存在计算机内、有组织的、可共享的大量数据集合。

数据库的特征

* 数据按一定的数据模型组织、描述和储存
* 可以被各种用户共享
* 冗余度较小
* 数据独立性较高
* 易扩展

## 2、数据库管理系统

**数据库管理系统(Database Manager System，DBMS)**是位于用户与操作系统之间的一层数据管理软件。可以科学地组织和存储数据、高效地获取和维护数据。

DBMS的主要功能

* 数据定义
  * 提供数据定义语言(DDL)
  * 定义数据库中的数据对象
* 数据操纵功能
  * 提供数据操纵语言(DML)
  * 操纵数据实现对数据库的基本操作(增删查改)
* 数据库的运行管理
  * 保证数据的安全性、完整性
  * 多用户对数据的并发使用
  * 发生故障后的系统修复
* 数据库的建立和维护
  * 数据库数据批量装载
  * 数据库转储
  * 介质故障恢复

## 3、数据库系统

数据库系统（ Database System ，简称 DBS ）是指在计算机系统中引入数据库后的系统。在不引起混淆的情况下常常把数据库系统简称为数据库。

数据库系统的构成：数据库、数据库管理系统、数据库管理员、应用系统。

数据库系统的特点

* 数据结构化
  * 数据的**结构用数据模型描述**，无需程序定义和解释
  * 可以变长，**最小存取单位是数据项**
* 数据的共享性高，冗余度低，易扩充
* 数据独立性高
  * 物理独立性高，指用户的**应用程序与存储在磁盘上的数据库中数据是相互独立**的。当数据的物理存储改变了，应用程序不用改变
  * 指用户的应用程序与数据库的逻辑结构是相互独立的
* 数据由 DBMS 统一管理和控制
  * 数据的安全性(Security)保护(每个用户只能按指定方式使用和处理指定数据，保护数据以防止不合法的使用造成的数据的泄密和破坏)
  * 数据的完整性(Integrity)检查(将数据控制在有效的范围内，或保证数据之间满足一定的关系)
  * 并发(Concurrency)控制:对多用户的并发操作加以控制和协调，防止相互干扰而 得到错误的结果
  * 数据库恢复(Recovery)

# 二、数据模型

数据模型应满足三方面要求： 能比较真实地模拟现实世界；容易为人所理解；便于在计算机上实现。

* 概念模型：按用户的观点来对数据和信息建模
* 数据模型：包括逻辑模型和物理模型
  * 逻辑模型：主要包括网状模型、层次模型、关系模型等
  * 物理模型：是对数据最低层的抽象，描述数据在系统内部的表示方式和存取方法，是面向计算机系统的

基本概念

* 实体(Entity)：客观存在并可相互区别的事物称为实体
* 属性(Attribute)：实体所具有的某一特性称为属性，一个实体可以由若 干个属性来刻画
* 码(Key)：唯一标识实体的属性集
* 域(Domain)：属性的取值范围
* 实体型(Entity Type): 用**实体名及其属性名集合**来抽象和刻画同类实体
* 实体集(Entity Set): 同型实体的集合
* 联系(Relationship): 事物内部以及事物之间的联系，在信息世界中反映为实体（型）内部的联系和实体（型）之间的联系

## 1、概念模型的一种表示方法

实体-联系方法(E-R)，

* 实体
  * 用**矩形**表示，矩形框内写明实体名。
* 属性
  * 用**椭圆形**表示，用无向边与实体连接起来。
* 联系
  * 用**菱形**表示，菱形框内写明联系名，并用无向边分 别与有关实体连接起来，同时在无向边旁标上联系的类型

注意的是，如果联系有属性，也需要将联系与属性连接起来。

## 2、层次模型

层次模型需要满足两个条件

* 有且只有一个结点没有双亲结点，这个结点称为根结点
* 根以外的其它结点有且只有一个双亲结点

### 层次模型的特点

* 结点双亲唯一
* **只能直接处理一对多的实体联系**
* 每个记录类型定义一个排序字段，也称为码字段
* 任何记录值只有按其路径查看时，才能显出它的全部意义
* 没有一个子女记录能够脱离双亲记录值而独立存在

层次模型是将**多对多的联系分解为一对多的联系**。因此可以用层次模型间接表示多对多联系。

### 层次模型的**完整性约束**

* 无相应的双亲结点值就不能插入子女结点值
* 如果删除双亲结点值，则相应的子女结点值也被同时删除
* 更新操作时，应更新所有相应记录，以保证数据的一致性

### 层次模型的优缺点

优点

* 简单，对具有一对多的层次关系的部门描述**自然、直观，容易理解**
* 性能优于关系模型，不低于网状模型
* 提供了良好的**完整性支持**

缺点

* 多对多联系表示不自然
* 对插入和删除操作的限制多
* 查询子女结点必须通过双亲结点
* 层次命令趋于程序化

## 3、网状模型

满足下面两个条件基本层次联系的集合为网状模型

* 允许**一个以上的结点无双亲**
* 一个结点可以有多于一个的双亲

### 完整性约束条件

* 允许插入尚未确定双亲结点值的子女结点值
* 允许只删除双亲结点值

### 优缺点

优点

* 能够更为直接地描述现实世界，如一个结点可以有多个双亲
* 具有良好的性能，存取效率较高

缺点

* **结构比较复杂**，而且随着应用环境的扩大，数据库的结构就变得越来越复杂，不利于最终用户掌握
* DDL 、 DML 语言复杂，用户不容易使用

## 4、关系模型

在用户观点下，关系模型中数据的**逻辑结构是一张二维表**，它由行和列组成

### 基本概念

关系(Relation)：一个关系对应的通常是一个表

元组(Tuple):表中的一行为一个元组

属性(Attribute):表中的一列即为一个属性

主码(Key)： 表中的某个属性组，它可以唯一确定一个元组。

域(Domain)： 属性的取值范围

分量： 元组中的一个属性值

关系模式

### 优缺点

优点

* 建立在严格的数学概念的基础上
* 概念单一。数据结构简单、清晰，用户易懂易用
  * 实体和各类联系都用关系来表示
  * 对数据的检索结果也是关系
* 存取路径对用户透明
  * 具有更高的数据独立性，更好的安全保密性
  * 简化了程序员的工作和数据库开发建立的工作

# 三、数据库系统结构

型(Type)：对某一类数据的结构和属性的说明

值(Value)：型的一个具体赋值

模式(Schema)：数据库逻辑结构和特征的描述；是型的描述，反映的是数据的结构及其联系。模式是相对稳定的

模式的一个示例(instance)：

## 1、三级模式结构

模式是数据库中**全体数据的逻辑结构和特征**的描述；所有用户的公共数据视图，综合了所有用户的需求。

**一个数据库只有一个模式。**模式是数据库系统模式结构中间层。**与数据的物理存储细节和硬件环境无关，与具体的应用程序、开发工具及高级程序设计语言无关**



* 外模式
  * 数据库**用户（包括应用程序员和最终用户）使用的局部**数据的逻辑结构和特征的描述
  * 数据库用户的数据视图，是与某一应用有关的数据的逻辑表示
  * 模式与外模式是一对多的关系：**一个数据库可以有多个外模式。反映了不同的用户的应用需求 、看待数据的方式、对数据保密的要求**
  * 外模式与应用是一对多的关系：**同一外模式也可以为某一用户的多个应用系统所使用**
* 内模式
  * 是数据物理结构和存储方式的描述，**数据在数据库内部的表示方式**
  * 记录的存储方式（顺序存储，按照 B 树结构存储，按 hash 方 法存储）、索引的组织方式、数据是否压缩、数据是否加密、数据存储记录结构的规定

三级模式是对数据的三种抽象级别，二级映像在DBMS内部实现这三个抽象层次的联系和转换。







## 2、二级映像

### 外模式/模式映像

![](https://github.com/healthyxj/DATABASE/blob/main/imgs/%E5%A4%96%E6%A8%A1%E5%BC%8F.jpg)
![](https://github.com/healthyxj/DATABASE/blob/main/imgs/%E4%B8%89%E7%BA%A7%E6%A8%A1%E5%BC%8F%E4%B8%8E%E4%BA%8C%E7%BA%A7%E6%98%A0%E5%83%8F.jpg)

定义了外模式与模式之间的对应关系。

每个外模式都有一个外模式/模式映像，能够**保证数据的逻辑独立性**。

* 当模式改变时，数据库管理员**修改有关的外模式／ 模式映象**，使外模式保持不变
* **应用程序是依据数据的外模式**编写的，从而应用程 序不必修改，保证了数据与程序的逻辑独立性

### 内模式/模式映像

模式／内模式映象定义了数据全局逻辑结构与存 储结构之间的对应关系。例如，说明逻辑记录和 字段在内部是如何表示的。**保证数据的物理独立性**

* 当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式／内模式映象，使模式保持不变
* 应用程序不受影响

# 四、数据库系统的组成

![](https://github.com/healthyxj/DATABASE/blob/main/imgs/%E5%90%84%E7%B1%BB%E4%BA%BA%E5%91%98%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A7%86%E5%9B%BE.jpg)

## 1、硬件平台及数据库

对硬件资源的要求

* 足够大的内存
* 足够大的外存
* 较高的通道速率

## 2、软件

DBMS、操作系统、与数据库接口的高级语言及其编译系统、以DBMS为核心的应用开发工具、

## 3、人员

* 数据库管理员
  * 决定数据库中的信息内容和结构、数据库的存储结构和存取策略
  * 定义数据的安全性要求和完整性约束条件
  * 监控数据库的使用和运行（周期性转储数据库，指数据文件和日志文件、系统故障恢复、介质故障恢复、监视审计文件）
  * 数据库的改进和重组
  * 数据库重构
* 系统分析员
  * 负责应用系统的需求分析和规范说明
  * 与用户及 DBA 协商，确定系统的硬软件配置
* 数据库设计人员
  * 参加用户需求调查和系统分析
  * 确定数据库中的数据
* 应用程序员
  * 设计和编写应用系统的程序模块
  * 调试和安装



